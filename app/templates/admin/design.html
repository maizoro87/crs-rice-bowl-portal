{% extends 'admin/base.html' %}

{% block title %}Design{% endblock %}
{% block page_title %}Design Settings{% endblock %}

{% block content %}
<form method="POST" action="{{ url_for('admin_bp.design') }}">
    <!-- Theme Selection -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <i class="bi bi-palette"></i> Theme Selection
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label for="theme" class="form-label">Color Theme</label>
                <select class="form-select" id="theme" name="theme">
                    <option value="lenten_purple" {% if theme == 'lenten_purple' or not theme %}selected{% endif %}>
                        Lenten Purple (Default)
                    </option>
                    <option value="school_colors" {% if theme == 'school_colors' %}selected{% endif %}>
                        School Colors
                    </option>
                    <option value="blue_green" {% if theme == 'blue_green' %}selected{% endif %}>
                        Blue & Green
                    </option>
                    <option value="warm_earth" {% if theme == 'warm_earth' %}selected{% endif %}>
                        Warm Earth Tones
                    </option>
                </select>
                <small class="form-text text-muted">Select the color scheme for the public website</small>
            </div>

            <div class="theme-preview mt-4">
                <h6>Theme Preview:</h6>
                <div id="theme-preview-box" class="p-4 rounded" style="background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%); color: white;">
                    <h5>CRS Rice Bowl Portal</h5>
                    <p class="mb-0">This is how your selected theme will look</p>
                </div>
            </div>
        </div>
    </div>

    <!-- School Logo -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-image"></i> School Logo
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label for="school_logo_url" class="form-label">Logo URL</label>
                <input type="url" class="form-control" id="school_logo_url" name="school_logo_url"
                       value="{{ school_logo_url if school_logo_url else '' }}"
                       placeholder="https://example.com/logo.png">
                <small class="form-text text-muted">Enter the direct URL to your school's logo image (PNG, JPG, or SVG)</small>
            </div>

            {% if school_logo_url %}
            <div class="mt-3">
                <h6>Current Logo Preview:</h6>
                <div class="p-3 border rounded bg-light text-center">
                    <img src="{{ school_logo_url }}" alt="School Logo" style="max-height: 100px; max-width: 100%;">
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- CRS Imagery -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-images"></i> CRS Imagery
        </div>
        <div class="card-body">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="enable_crs_imagery" name="enable_crs_imagery" value="true"
                       {% if enable_crs_imagery %}checked{% endif %}>
                <label class="form-check-label" for="enable_crs_imagery">
                    <strong>Enable CRS Imagery and Branding</strong>
                </label>
            </div>
            <small class="form-text text-muted d-block mt-2">
                Display official CRS Rice Bowl images, logos, and graphics throughout the website
            </small>

            <div class="alert alert-info mt-3 mb-0">
                <i class="bi bi-info-circle"></i>
                <strong>What this includes:</strong>
                <ul class="mb-0 mt-2">
                    <li>CRS Rice Bowl logo in header</li>
                    <li>Country-specific images on quiz pages</li>
                    <li>CRS branding elements throughout the site</li>
                    <li>Official CRS colors and styling accents</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Custom CSS (Optional) -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-code-slash"></i> Custom CSS (Advanced)
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label for="custom_css" class="form-label">Additional CSS</label>
                <textarea class="form-control font-monospace" id="custom_css" name="custom_css" rows="8"
                          placeholder="/* Add custom CSS here */&#10;&#10;.custom-class {&#10;    color: #333;&#10;}">{{ custom_css if custom_css else '' }}</textarea>
                <small class="form-text text-muted">Add custom CSS to further customize the appearance of your site (optional)</small>
            </div>

            <div class="alert alert-warning mb-0">
                <i class="bi bi-exclamation-triangle"></i>
                <strong>Warning:</strong> Only add CSS if you are familiar with web styling. Incorrect CSS may break the site's appearance.
            </div>
        </div>
    </div>

    <!-- Save Button -->
    <div class="d-flex justify-content-end">
        <button type="submit" class="btn btn-primary btn-lg">
            <i class="bi bi-check-circle"></i> Save Design Settings
        </button>
    </div>
</form>

<div class="card mt-4">
    <div class="card-header bg-info text-white">
        <i class="bi bi-info-circle"></i> Design Tips
    </div>
    <div class="card-body">
        <ul class="mb-0">
            <li><strong>Lenten Purple:</strong> Traditional purple theme perfect for the Lenten season</li>
            <li><strong>School Colors:</strong> Customize to match your school's official colors</li>
            <li><strong>Logo Best Practices:</strong> Use a transparent PNG for best results. Recommended size: 200x200 pixels</li>
            <li><strong>CRS Imagery:</strong> Enable to create a more immersive experience with official CRS branding</li>
            <li><strong>Preview Changes:</strong> Visit the public website to see your changes live</li>
        </ul>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const themeSelect = document.getElementById('theme');
        const previewBox = document.getElementById('theme-preview-box');

        const themes = {
            'lenten_purple': {
                background: 'linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%)',
                color: 'white'
            },
            'school_colors': {
                background: 'linear-gradient(135deg, #003366 0%, #006699 100%)',
                color: 'white'
            },
            'blue_green': {
                background: 'linear-gradient(135deg, #0077be 0%, #00a86b 100%)',
                color: 'white'
            },
            'warm_earth': {
                background: 'linear-gradient(135deg, #8b4513 0%, #d2691e 100%)',
                color: 'white'
            }
        };

        themeSelect.addEventListener('change', function() {
            const selectedTheme = themes[this.value];
            if (selectedTheme) {
                previewBox.style.background = selectedTheme.background;
                previewBox.style.color = selectedTheme.color;
            }
        });
    });
</script>
{% endblock %}
